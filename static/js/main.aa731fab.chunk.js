(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(n,e,t){},52:function(n,e,t){},53:function(n,e,t){"use strict";t.r(e);var a,i,c,r,o,s,d,j,b,p,x=t(0),l=t.n(x),u=t(23),h=t.n(u),O=(t(34),t(4)),g=t(3),f=t(2),m=t.p+"static/media/trump.8c6b3e9f.jpg",v=Object(x.createContext)(null),w=t(24),y=t.n(w),k="token",S=function(n){localStorage.setItem(k,n)},C=function(){return localStorage.getItem(k)},z=function(n,e,t){y.a.fire({title:n,text:e,icon:t})},P=t(10),N=t(5),_=t(1),D=f.a.div(a||(a=Object(g.a)(["\n  border-bottom: 1.5px solid rgb(228, 225, 225, 0.7);\n"]))),T=f.a.div(i||(i=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  height: 100px;\n  padding: 40px 0px 0px 0px;\n  align-items: baseline;\n  max-width: 1200px;\n  margin: 0 auto;\n"]))),L=f.a.div(c||(c=Object(g.a)(["\n  display: flex;\n  align-items: baseline;\n"]))),A=f.a.div(r||(r=Object(g.a)(["\n  display: flex;\n  align-items: baseline;\n \n"]))),E=f.a.div(o||(o=Object(g.a)(["\n  color: #191919;\n  font-size:26px;\n  font-weight: 650;\n  \n"]))),J=f.a.div(s||(s=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 0px 20px;\n  \n"]))),U=Object(f.a)(P.b)(d||(d=Object(g.a)(["\n  text-decoration: none;\n  color: #787878;\n  font-size: 18px;\n  cursor:pointer;\n  margin: 12px;\n  font-weight: 480;\n\n  &:hover {\n    color: black;\n  }\n"]))),W=f.a.div(j||(j=Object(g.a)(["\n  right: 0px;\n"]))),B=f.a.div(b||(b=Object(g.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  overflow: hidden;\n"]))),F=f.a.div(p||(p=Object(g.a)(["\n  background-image: url(",");\n  width: 100%;\n  height: 100%;\n  background-size:cover;\n  background-position: center center\n"])),m);function I(){var n=Object(N.g)(),e=Object(N.f)(),t=Object(x.useContext)(v),a=t.user,i=t.setUser;return Object(_.jsx)(D,{children:Object(_.jsxs)(T,{children:[Object(_.jsxs)(L,{children:[Object(_.jsx)(E,{children:"\u5171\u7b46\u90e8\u843d\u683c"}),Object(_.jsxs)(J,{children:[Object(_.jsx)(U,{to:"/",children:"Lists"}),Object(_.jsx)(U,{to:"/about",children:"About"})]})]}),Object(_.jsx)(A,{children:Object(_.jsxs)(J,{children:[Object(_.jsxs)(W,{children:[a&&Object(_.jsx)(U,{to:"/write",$active:"/write"===n.pathname,children:"Write a story"}),a&&Object(_.jsx)(U,{to:"/",onClick:function(){S(""),i(null),z("log out successfully!","See you soon!","success"),"/"!==n.pathname&&e.push("/")},children:"Sign out"}),!a&&Object(_.jsx)(U,{to:"/signin",$active:"/signin"===n.pathname,children:"Sign in"}),!a&&Object(_.jsx)(U,{to:"/signup",$active:"/signup"===n.pathname,children:"Sign up"})]}),Object(_.jsx)(B,{children:Object(_.jsx)(F,{})})]})})]})})}var M,$,R,q,G,H,K=t(29),Q=t.n(K);t(52);function V(n){var e=n.perPageCount,t=n.totalCount,a=n.handlePageClick,i=Math.ceil(t/e);return Object(_.jsx)("div",{className:"PaginatedContainer",children:Object(_.jsx)(Q.a,{previousLabel:"\u2190 Previous",nextLabel:"Next \u2192",pageCount:i,onPageChange:a,containerClassName:"pagination",previousLinkClassName:"pagination__link",nextLinkClassName:"pagination__link",disabledClassName:"pagination__link--disabled",activeClassName:"pagination__link--active"})})}var X,Y,Z,nn,en,tn,an=f.a.div(M||(M=Object(g.a)(["\n  position: sticky;\n  align-self: flex-start;\n  top: 100px;\n  max-width: 200px;\n  padding: 30px;\n  margin-top: 40px;\n"]))),cn=f.a.div($||($=Object(g.a)(["\n  width: 130px;\n  height: 130px;\n  position: relative;\n"]))),rn=f.a.div(R||(R=Object(g.a)(["\n  background-image: url(",");\n  width: 100%;\n  height: 100%;\n  background-size:cover;\n  background-position: center center\n"])),m),on=f.a.div(q||(q=Object(g.a)(["\n  margin-top: 20px;\n  font-size: 16px;\n  font-weight: bolder;\n  font-family: sans-serif;\n"]))),sn=f.a.div(G||(G=Object(g.a)(["\n  margin-top: 20px;\n  font-size: 14px;\n  font-weight: bolder;\n  font-family: sans-serif;\n  color: #737373;\n"]))),dn=f.a.div(H||(H=Object(g.a)(["\n  width: 200px;\n  height: 1px;\n  margin-top: 50px;\n  background: rgb(228, 225, 225);\n"])));function jn(){return Object(_.jsxs)(an,{children:[Object(_.jsx)(cn,{children:Object(_.jsx)(rn,{})}),Object(_.jsx)(on,{children:"\u7b2c\u4e94\u671f\u5b78\u751f"}),Object(_.jsx)(sn,{children:"Taiwan"}),Object(_.jsx)(dn,{})]})}var bn=f.a.div(X||(X=Object(g.a)(["\n  min-width: 680px;\n  padding: 0px 30px;\n  font-family: sans-serif;\n  margin-top: 24px;\n  overflow-wrap: anywhere;\n"]))),pn=f.a.div(Y||(Y=Object(g.a)(["\n  font-size: 12px;\n  margin-bottom: 14px;\n  margin-top: 8px;\n  color: #a8a8a8;\n"]))),xn=f.a.div(Z||(Z=Object(g.a)(["\n  font-size: 24px;\n  font-weight: bolder;\n  font-family: sans-serif;\n  text-decoration: none;\n  color: black;\n  margin-bottom: 10px;\n"]))),ln=f.a.div(nn||(nn=Object(g.a)(["\n  margin-top: 17px;\n  white-space: pre-line;\n  line-height: 1.5em;\n  height: 70px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 3;\n  overflow: hidden;\n"]))),un=Object(f.a)(P.b)(en||(en=Object(g.a)(["\n  display: inline-block;\n  color: #198030;\n  margin-top: 18px;\n  text-decoration: none;\n  font-size: 16px;\n"]))),hn=f.a.div(tn||(tn=Object(g.a)(["\n  max-width: 100%;\n  height: 1px;\n  margin-top: 40px;\n  background: rgb(228, 225, 225);\n"])));function On(n){var e=n.postData;return Object(_.jsxs)(bn,{children:[Object(_.jsx)(pn,{children:new Date(e.createdAt).toDateString()}),Object(_.jsx)(xn,{children:e.title}),Object(_.jsx)(ln,{children:e.body}),Object(_.jsx)(un,{to:"/page/".concat(e.id),children:"Read more..."}),Object(_.jsx)(hn,{})]},e.id)}var gn,fn,mn,vn,wn,yn,kn,Sn,Cn,zn="https://student-json-api.lidemy.me",Pn=function(){var n=C();return fetch("".concat(zn,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},Nn=t(15),_n=f.a.div(gn||(gn=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding-bottom: 50px;\n  width: 1200px;\n  min-width: 1235px;\n  margin: 0 auto;\n"]))),Dn=f.a.div(fn||(fn=Object(g.a)(["\n  min-width: 200px;\n  padding: 30px;\n  margin-top: 50px;\n"]))),Tn=f.a.div(mn||(mn=Object(g.a)(["\n  min-width: 680px;\n  padding: 0px 30px;\n  font-family: sans-serif;\n"]))),Ln=f.a.div(vn||(vn=Object(g.a)(["\n  width: 680px;\n  padding: 350px;\n"]))),An=function(){var n=Object(x.useState)(!0);return Object(O.a)(n,1)[0]&&Object(_.jsx)(Nn.a,{})};function En(){var n=Object(x.useState)(""),e=Object(O.a)(n,2),t=e[0],a=e[1],i=Object(x.useState)(0),c=Object(O.a)(i,2),r=c[0],o=c[1],s=Object(x.useState)(0),d=Object(O.a)(s,2),j=d[0],b=d[1];return Object(x.useEffect)((function(){var n,e,t=(n=r+1,e=5,fetch("".concat(zn,"/posts?_sort=createdAt&_order=desc&_page=").concat(n,"&_limit=").concat(e)));t.then((function(n){b(n.headers.get("x-total-count"))})),t.then((function(n){return n.json()})).then((function(n){a(n)})),window.scrollTo({top:0,behavior:"smooth"})}),[r]),Object(_.jsxs)(_n,{children:[Object(_.jsx)(jn,{}),t&&Object(_.jsxs)(Tn,{children:[t.map((function(n){return Object(_.jsx)(On,{postData:n},n.id)})),Object(_.jsx)(V,{perPageCount:5,handlePageClick:function(n){var e=n.selected;o(e)},totalCount:j})]}),!t&&Object(_.jsx)(Ln,{children:Object(_.jsx)(An,{})}),Object(_.jsx)(Dn,{})]})}var Jn,Un,Wn,Bn,Fn,In,Mn,$n,Rn=f.a.div(wn||(wn=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding-bottom: 50px;\n  width: 1200px;\n  min-width: 1235px;\n  margin: 0 auto;\n"]))),qn=f.a.div(yn||(yn=Object(g.a)(["\n  min-width: 200px;\n  padding: 30px;\n  margin-top: 50px;\n"]))),Gn=f.a.div(kn||(kn=Object(g.a)(["\n  min-width: 680px;\n  padding: 70px 30px 0px 30px;\n  font-family: sans-serif;\n"]))),Hn=f.a.div(Sn||(Sn=Object(g.a)(["\n  font-size: 24px;\n  font-weight: bolder;\n  font-family: sans-serif;\n  text-decoration: none;\n  color: black;\n  margin-bottom: 10px;\n"]))),Kn=f.a.div(Cn||(Cn=Object(g.a)(["\n  margin-top: 17px;\n  white-space: pre-line;\n  line-height: 1.5em;\n  height: 70px;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 3;\n  overflow: hidden;\n"])));function Qn(){return Object(_.jsxs)(Rn,{children:[Object(_.jsx)(jn,{}),Object(_.jsxs)(Gn,{children:[Object(_.jsx)(Hn,{children:"About"}),Object(_.jsx)(Kn,{children:"\u4f60\u597d\uff0c\u9019\u88e1\u662f\u7a0b\u5f0f\u5c0e\u5e2b\u7b2c\u4e94\u671f\u5b78\u751f\u7684\u5171\u7b46\u90e8\u843d\u683c"})]}),Object(_.jsx)(qn,{})]})}var Vn,Xn,Yn,Zn,ne,ee,te=f.a.div(Jn||(Jn=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding-bottom: 50px;\n  margin: 0 auto;\n"]))),ae=f.a.form(Un||(Un=Object(g.a)(["\n  display: grid;\n  justify-content: center;\n  margin-top: 30px;\n  padding: 30px 30px 60px 30px;\n  border: 1px solid #999595;\n  border-radius: 5px;\n  background: white;\n  width: 1100px;\n"]))),ie=f.a.div(Wn||(Wn=Object(g.a)(["\n  font-size: 30px;\n"]))),ce=f.a.input(Bn||(Bn=Object(g.a)(["\n  width: 1000px;\n  height: 30px;\n  font-size: 24px;\n  margin-top: 10px;\n  border: 1px solid #999595;\n  border-radius: 5px;\n  font-family: MONOSPACE;\n"]))),re=f.a.textarea(Fn||(Fn=Object(g.a)(["\n  width: 1000px;\n  height: 400px;\n  font-size: 24px;\n  margin-top: 10px;\n  border: 1px solid #999595;\n  border-radius: 5px;\n  font-family: MONOSPACE;\n"]))),oe=f.a.div(In||(In=Object(g.a)(["\n  margin-top: 20px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  width: 1000px;\n"]))),se=f.a.button(Mn||(Mn=Object(g.a)(["\n  width: 300px;\n  background: green;\n  border: none;\n  padding: 10px 20px 10px 20px;\n  color: white;\n  border-radius: 10px;\n  font-size: 18px;\n  cursor: pointer;\n  &:hover {\n    background: #00800059;\n  }\n"]))),de=f.a.div($n||($n=Object(g.a)(["\n  color: red;\n"])));function je(){var n=Object(x.useState)(""),e=Object(O.a)(n,2),t=e[0],a=e[1],i=Object(x.useState)(""),c=Object(O.a)(i,2),r=c[0],o=c[1],s=Object(x.useState)(" "),d=Object(O.a)(s,2),j=d[0],b=d[1],p=Object(x.useContext)(v).user,l=Object(N.f)();null===p&&l.push("/");return Object(_.jsx)(te,{children:Object(_.jsxs)(ae,{onSubmit:function(n){n.preventDefault(),function(n,e){console.log(n,e);var t=C();return fetch("".concat(zn,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(t,r).then((function(n){if(console.log(n),0===n.ok)return b(n.message);z("Publish successfully!","","success"),l.push("/")}))},children:[Object(_.jsx)(ie,{children:"Write a story."}),Object(_.jsx)(ce,{placeholder:"Title",value:t,onChange:function(n){return a(n.target.value)}}),Object(_.jsx)(re,{placeholder:"Tell your story...",value:r,onChange:function(n){return o(n.target.value)}}),Object(_.jsxs)(oe,{children:[j&&Object(_.jsx)(de,{children:j}),Object(_.jsx)(se,{children:"\u767c\u5e03"})]})]})})}var be,pe,xe,le,ue,he,Oe=f.a.div(Vn||(Vn=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding-bottom: 50px;\n  margin: 0 auto;\n"]))),ge=f.a.form(Xn||(Xn=Object(g.a)(["\n  display: grid;\n  margin-top: 100px;\n  padding: 50px 30px 60px 30px;\n  border: 1px solid #e1e0e0;\n  border-radius: 5px;\n  background: white;\n"]))),fe=f.a.div(Yn||(Yn=Object(g.a)(["\n  font-size: 30px;\n"]))),me=f.a.input(Zn||(Zn=Object(g.a)(["\n  width: 300px;\n  height: 30px;\n  font-size: 24px;\n  margin-top: 10px;\n"]))),ve=f.a.button(ne||(ne=Object(g.a)(["\n  margin-top: 20px;\n  width: 300px;\n  background: green;\n  border: none;\n  padding: 10px 20px 10px 20px;\n  color: white;\n  border-radius: 10px;\n  font-size: 18px;\n  cursor: pointer;\n  &:hover {\n    background: #00800059;\n  }\n"]))),we=f.a.div(ee||(ee=Object(g.a)(["\n  color: red;\n"])));function ye(){var n=Object(x.useContext)(v).setUser,e=Object(x.useState)(""),t=Object(O.a)(e,2),a=t[0],i=t[1],c=Object(x.useState)(""),r=Object(O.a)(c,2),o=r[0],s=r[1],d=Object(x.useState)(),j=Object(O.a)(d,2),b=j[0],p=j[1],l=Object(N.f)();return Object(_.jsx)(Oe,{children:Object(_.jsxs)(ge,{onSubmit:function(e){e.preventDefault(),p(null),function(n,e){return fetch("".concat(zn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(a,o).then((function(e){if(0===e.ok)return p(e.message);S(e.token),Pn().then((function(e){if(1!==e.ok)return S(null),p(e.toString());n(e.data),z("Log in successfully!","Welcome back!","success"),l.push("/")}))}))},children:[Object(_.jsx)(fe,{children:"Welcome back."}),Object(_.jsx)(me,{placeholder:"Username",value:a,onChange:function(n){return i(n.target.value)}}),Object(_.jsx)(me,{placeholder:"Password",type:"password",value:o,onChange:function(n){return s(n.target.value)}}),Object(_.jsx)("div",{children:Object(_.jsx)(ve,{children:"\u767b\u5165"})}),b&&Object(_.jsx)(we,{children:b})]})})}var ke,Se,Ce,ze,Pe,Ne,_e=f.a.div(be||(be=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  padding-bottom: 50px;\n  margin: 0 auto;\n"]))),De=f.a.form(pe||(pe=Object(g.a)(["\n  display: grid;\n  justify-content: center;\n  margin-top: 100px;\n  padding: 50px 30px 60px 30px;\n  border: 1px solid #e1e0e0;\n  border-radius: 5px;\n  background: white;\n  width: 400px;\n\n"]))),Te=f.a.div(xe||(xe=Object(g.a)(["\n  font-size: 30px;\n"]))),Le=f.a.input(le||(le=Object(g.a)(["\n  width: 300px;\n  height: 30px;\n  font-size: 24px;\n  margin-top: 10px;\n"]))),Ae=f.a.button(ue||(ue=Object(g.a)(["\n  margin-top: 20px;\n  width: 300px;\n  background: green;\n  border: none;\n  padding: 10px 20px 10px 20px;\n  color: white;\n  border-radius: 10px;\n  font-size: 18px;\n  cursor: pointer;\n  &:hover {\n    background: #00800059;\n  }\n"]))),Ee=f.a.div(he||(he=Object(g.a)(["\n  color: red;\n  width: 300px;\n"])));function Je(){var n=Object(x.useState)(""),e=Object(O.a)(n,2),t=e[0],a=e[1],i=Object(x.useState)(""),c=Object(O.a)(i,2),r=c[0],o=c[1],s=Object(x.useState)(""),d=Object(O.a)(s,2),j=d[0],b=d[1],p=Object(x.useState)(),l=Object(O.a)(p,2),u=l[0],h=l[1],g=Object(N.f)();return Object(_.jsx)(_e,{children:Object(_.jsxs)(De,{onSubmit:function(n){n.preventDefault(),h(null),function(n,e,t){return fetch("".concat(zn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(t,r,j).then((function(n){if(0===n.ok)return h(n.message);z("Sign up successfully!","Please Sign in to explore more","success"),g.push("/signin")}))},children:[Object(_.jsx)(Te,{children:"Welcome to sign up."}),Object(_.jsx)(Le,{placeholder:"Nickname",value:t,onChange:function(n){return a(n.target.value)}}),Object(_.jsx)(Le,{placeholder:"Username",value:r,onChange:function(n){return o(n.target.value)}}),Object(_.jsx)(Le,{placeholder:"Password",type:"password",value:j,onChange:function(n){return b(n.target.value)}}),Object(_.jsx)("div",{children:Object(_.jsx)(Ae,{children:"\u8a3b\u518a"})}),u&&Object(_.jsx)(Ee,{children:u})]})})}var Ue,We=f.a.div(ke||(ke=Object(g.a)(["\n  max-width: 700px;\n  margin: 40px auto;\n"]))),Be=f.a.div(Se||(Se=Object(g.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),Fe=f.a.div(Ce||(Ce=Object(g.a)(["\n  font-size: 30px;\n  font-weight: bold;\n  color: #333;\n  text-decoration: none;\n"]))),Ie=f.a.div(ze||(ze=Object(g.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  font-size: 14px;\n  color:#afadad;\n  margin: 20px 0px 20px 0px;\n"]))),Me=f.a.div(Pe||(Pe=Object(g.a)(["\n  margin-top: 28px;\n  font-size:24px;\n\n"]))),$e=f.a.div(Ne||(Ne=Object(g.a)(["\n  width: 680px;\n  padding: 200px 300px;\n"]))),Re=function(){var n=Object(x.useState)(!0);return Object(O.a)(n,1)[0]&&Object(_.jsx)(Nn.a,{})};function qe(){var n=Object(x.useState)(""),e=Object(O.a)(n,2),t=e[0],a=e[1],i=Object(N.h)().slug;return Object(x.useEffect)((function(){var n;(n=i,fetch("".concat(zn,"/posts?id=").concat(n)).then((function(n){return n.json()}))).then((function(n){return a(n)}))}),[i]),Object(_.jsxs)(We,{children:[t&&Object(_.jsxs)(Be,{children:[Object(_.jsx)(Fe,{children:t[0].title}),Object(_.jsx)(Ie,{children:new Date(t[0].createdAt).toDateString()})]}),t&&Object(_.jsx)(Me,{children:t[0].body}),!t&&Object(_.jsx)($e,{children:Object(_.jsx)(Re,{})})]})}var Ge=f.a.div(Ue||(Ue=Object(g.a)(["\n\n"])));var He=function(){var n=Object(x.useState)(null),e=Object(O.a)(n,2),t=e[0],a=e[1];return Object(x.useEffect)((function(){Pn().then((function(n){1===n.ok&&a(n.data)}))}),[]),Object(_.jsx)(v.Provider,{value:{user:t,setUser:a},children:Object(_.jsx)(Ge,{children:Object(_.jsxs)(P.a,{children:[Object(_.jsx)(I,{}),Object(_.jsxs)(N.c,{children:[Object(_.jsx)(N.a,{exact:!0,basename:"/",children:Object(_.jsx)(En,{})}),Object(_.jsx)(N.a,{basename:"/react-week22/about",children:Object(_.jsx)(Qn,{})}),Object(_.jsx)(N.a,{basename:"/react-week22/write",children:Object(_.jsx)(je,{})}),Object(_.jsx)(N.a,{basename:"/react-week22/signin",children:Object(_.jsx)(ye,{})}),Object(_.jsx)(N.a,{basename:"/react-week22/signup",children:Object(_.jsx)(Je,{})}),Object(_.jsx)(N.a,{basename:"/react-week22/page/:slug",children:Object(_.jsx)(qe,{})})]})]})})})},Ke=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,54)).then((function(e){var t=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;t(n),a(n),i(n),c(n),r(n)}))};h.a.render(Object(_.jsx)(l.a.StrictMode,{children:Object(_.jsx)(He,{})}),document.getElementById("root")),Ke()}},[[53,1,2]]]);
//# sourceMappingURL=main.aa731fab.chunk.js.map